#+TITLE: 计算机网络
#+DATE: 2018-02-26
#+SETUPFILE: ~/blog/setupfile.org
#+JEKYLL_LAYOUT: post
#+JEKYLL_CATEGORIES: notes
#+JEKYLL_TAGS: 学习笔记
#+JEKYLL_PUBLISHED: true

* 计算机网络概论
** 计算机网络
*** 定义
由通信信道连接的 *主机和网络设备* 的集合，以方便用户共享资源和互相通信。
*** 特征
- *最主要特征* 是通用性，没有对特定应用进行优化
- 能够支持广泛的、不断出现的新型应用
*** 用途
- 共享信息
- 协同计算
- 方便通信
- 共享硬件
*** 组成
**** 称为节点的计算设备
***** 端系统（主机）
***** 中间节点
路由器，交换机，自治系统，虚拟节点等。
**** 称为链路的物理媒体
*** 连接方式
- 直接连接
- 网络云
- 网络云互联
*** 传递数据的方式
**** 电路交换（电话网）
*基本过程*
1. 建立连接
2. 传输数据
3. 连接释放

*优点* 独占资源，通信质量有保证，延迟小，无拥塞
*缺点* 建立连接时间长，工作复杂，有时工作效率低
**** 分组交换（计算机网络）
- 首先采用存储转发机制
- 将长数据划分为若干短数据形成分组
以上两条为 *计算机网络最根本工作机制*
**** 报文交换
*优点* 无连接，采用存储转发
*缺点* 对报文大小无限制，有时占用中间节点空间大，延时大
*** 网络拓扑结构
| 分类   | 优点               | 缺点                 |
|--------+--------------------+----------------------|
| 总线型 | 结构简单           | 单点故障可能影响全网 |
| 星型   | 扩展方便           | 对中心节点依赖较大   |
| 树型   | 扩展方便           | 对非叶子节点依赖较大 |
| 环形   | 结构简单，扩展方便 | 单点故障可能影响全网 |
| 网状   | 扩展方便           | 冗余太多             |
*** 网络服务
向用户提供有用的网络功能，由联网的端系统中的网络应用程序通过相互协作来提供。
** 因特网
*** 组成
1. 因特网边缘
2. [[*%E6%8E%A5%E5%85%A5%E7%BD%91][接入网]]
3. 因特网核心
*** 特点
*边缘复杂，核心简单* ：遵循“端到端”的原则，即将复杂的网络处理功能置于因特网边缘，而将相对简单的分组交付功能放在因特网核心。
*优点* ：充分利用了位于因特网边缘的端系统强大的计算能力，用软件方式处理大量复杂的控制和应用逻辑，而使位于因特网核心的路由器尽可能简单，以高速地转发分组。
*** 成功的因素
在网络边缘用软件实现，方便增加新的网络功能
*** 应用程序体系结构
**** 客户/服务器体系结构 （C/S模式）
***** 服务器 
1. 运行服务器程序的主机永远在运行
2. 具有永久IP和固定端口号
3. 响应客户机程序的请求，并提供服务
***** 客户机
1. 向服务器发出请求，接收服务器响应
2. 可以间歇与服务器连接
3. 具有动态IP地址和随机端口号
4. 客户机之间不通信
**** P2P体系结构（P2P模式）
***** 特点
1. 能够借助对等方的空闲资源而不需要庞大的服务器基础设施的支持，从而降低服务提供商成本
2. P2P应用具有群组性、高度分布性和动态性
3. P2P体系结构具有自扩展性
*** 接入网
指将端系统连接到其边缘路由器的物理链路及设备的集
*** 分类
**** 从作用范围
1. 广域网 WAN
2. 局域网 LAN
3. 城域网 MAN
4. 接入网 AN
**** 从使用者
1. 专用网
2. 公用网
** 协议分层与服务模型
*** 协议 
为进行网络中的数据交换而建立的规则、标准或规约称为网络协议
**** 三要素
1. 语法：数据与控制信息的结构与格式
2. 语义：语法定义结构中的具体含义
3. 语时：事件实现顺序的详细说明
*** 分层的网络体系结构
计算机网络的各层及相应协议的集合称为网络的体系结构
**** 分层的优点
1. 简化系统设计
2. 模块化易于维护系统的更新
**** 分层的缺点
功能冗余，降低系统性能；而且分层越多，分组首部越大
*** 报文的层间传递
同一系统相邻两层的实体进行交互的地方称为服务访问点 SAP
**** 水平协议和垂直服务
1. 向上层提供服务
2. 协议是“水平的”，服务是“垂直的”
3. 向上的服务利用了下层的功能
**** 多层通信的实质
1. 对等层实体之间虚拟通信
2. 下层向上层提供服务
3. 上层使用下层提供的服务
4. 实际通信在最底层媒体完成
*** 因特网体系结构
协议数据单元PDU是OSI参考模型中对等层协议之间交换的信息单元
**** OSI（开放系统互联）参考模型
| 自顶向下   | 信息单位     |
|------------+--------------|
| 应用层     | 无           |
| 表示层     | 无           |
| 会话层     | 无           |
| 传输层     | 数据段、报文 |
| 网络层     | 分组、数据报 |
| 数据链路层 | 数据帧       |
| 物理层     | 比特         |

**** TCP/IP体系结构
***** 特点
1. 协议栈呈“沙漏型”，IP是体系结构的“细腰”，代表最小的、精选的通用功能集，能够使高层应用与底层通信网技术独立发展
2. 为了提高系统效率没有严格分层
***** 重点
1. 边缘节点必须实现TCP/IP所有五个层
2. 交换机只有两层（物理层和数据链路层）
3. 路由器只有三层（物理层，数据链路层和网络层）
***** 两个子网
1. 资源子网：应用层和运输层
2. 通信子网： 物理层，数据链路层和网络层
** 分组交换网的性能指标
*** 重要概念
**** 带宽
1. 在通信领域指信号具有的频带宽度，单位是赫兹
2. 指链路在一定时段内所能传输的比特数的额定值，常用单位时Kb/s等（十的次方）
**** 时延
1. 处理时延
2. 排队时延
3. 传输时延（等于分组长度除以链路带宽）
4. 传播时延（等于节点间距离除以传播速度）

* 数据通信基础
** 数据通信基础知识
*** 通信系统模型
*通信的目的* 是用电信手段传递报文中的信息。 *通信系统* 的作用就是将信息从 *信源* 发送到一个或多个 *信宿* 。
**** 组成 
信源，发送设备，信道，接收设备，信宿
*** 数字通信及其性质
*数据* 是运输信息的实体， *信号* 是数据的电气或电磁表现。 *数据是针对信息而言的，而信号则是针对传输而言的* 
**** 数字信号和模拟信号
前者是离散的，后者是连续的。将数字信号转化为模拟信号的过程称为 *调制* ，反之称为 *解调制* 。
*****  数字信号 
基本单位是 *码元* 。数字通信具有抗干扰能力强且噪声不积累，传输差错可控，便于对数字信息进行处理、变换、存储，易于复用和易加密处理等优点。
***** 奈奎斯特公式
C=2W log_2 M bps
（低通带“2”，带通不带“2”,W为信道带宽，M为信号状态数量）
***** 香农公式 
C=W log_2 (1+S/N) bps
（W为信道带宽，S为信道内所传信号的平均功率，N为信道内部的高斯噪声功率）
*** 通信方式
**** 三种基本方式
1. 单工通信：只能单方向传输报文
2. 半双工通信：能够收发报文，但不能同时进行
3. 全双工通信：能够同时收发报文
**** 两种信号
*基带* 信号和 *宽带* 信号
** 传输媒体
*** 物理层基本概念
主要任务为确定与传输媒体的接口的一些特性
**** 机械特性
指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等
**** 电气特性
指明在接口电缆的各条线上出现的电压的范围
**** 功能特性
指明某条线上出现的某一种电平的电压表示何种意义
**** 规程特性
指明对于不同功能的各种可能事件的出现顺序
*** 导向传输媒体
**** 双绞线
**** 光纤
由光缆、光源和检测器组成
**** 同轴电缆
1. 粗缆：10BASE5（表示10M基带，最长500米）
2. 细缆：10BASE2
3. 100BASEF，100BASEB（F表示光纤，B表示宽带）
*** 非导向传输媒体
微波，卫星和无线电
** 编码和复用
*** 编码
为了使信道能有效地传输信号，并且接收节点能够有效地识别发送节点发送的比特， *首先要将比特编码为信号* ，然后再在媒体上进行传输。
**** 不归零（NRZ）
将比特数值1映射为高电平信号，数值0映射为低电平信号。但连续的1或0会带来两个问题。
1. 基线漂移：连续的1或0影响信号平均值，从而难以检测出信号变化
2. 时钟恢复：发送方和接收方不能同步时钟，无法正确对信号进行解码
**** 不归零反转（NRZI）
将当前信号的一个跳变编码为一个1,将保持当前信号编码为0（只解决了连续1的问题，没有解决连续0的问题）
**** 曼彻斯特编码
通过传输NRZ编码数据与时钟的异或合并了时钟和信号

*** 多路复用
指在一条物理链路上同时传输多路信息，以扩大信道的传输容量的技术。
1. 频分复用（FDM）
2. 时分复用（TDM）
3. 波分复用（WDM）
4. 码分复用（CDM）又称码分多址（CMDA）

CMDA中将每一个比特时间再划分为m比特的序列，称为 *码片* 。CMDA给每个节点分配的码片序列各不相同，并且相互正交。
1) 任意两个不同节点的码片向量规格化内积为0
2) 任意一个码片向量和自己的规格化内积为1
3) 任意一个码片向量和自己反码向量规格化内积为-1
** 交换技术
*** [[*%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%EF%BC%88%E7%94%B5%E8%AF%9D%E7%BD%91%EF%BC%89][电路交换（电话网）]]和[[*%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2][报文交换]] 
*** [[*%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%EF%BC%88%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%89][分组交换（计算机网络）]]
** 数字传输技术
*** PCM及其复用
为将模拟信号转变为数字信号，PCM（脉码调制）先要对模拟信号进行采样。
根据 *采样原理* ，采样频率不能低于信号最高频率两倍。
*** 同步数字系列SDH 
1. 统一复用的传输速率标准
2. 采用同步传输技术
* 直接连接的网络
数据链路层必须处理的四个基础性问题：
- 成帧
- 差错检测和纠正
- 可靠数据传输
- 多路访问

** 链路层概述
*链路层的任务* 将上层交付的数据报通过单段链路从一个节点传输到相邻的节
 点 
*** 网络链路的类型
- 点到点链路
- 广播链路
*** 链路层功能在哪里完成？
网络适配器和节点的驱动程序

** 成帧 
*** 面向比特的协议
把帧看成比特的集合，使用 *比特填充*  解决帧结构不完整的问题
*** 面向字节的协议
把帧看成字节的集合，使用 *字符填充法* 解决协议中某些字段长度不固定的问
题
*** PPP
点到点协议
** 差错检测和纠错技术
两种方法处理帧出现的差错：
- 检错重传
- 前向纠错
*** 奇偶检验
二维奇偶检验
*** 检验和方法
互联网校验和
*** 循环冗余检验
** 可靠数据传输原理
*** 流水线可靠数据传输协议（连续ARQ）
*** 回退N步协议（滑动窗口协议） GBN
*** 选择重传协议 SR
** 多路访问
协调多个发送节点和接收节点访问同一个公共信道
*** 信道划分协议
- 时分多路复用
- 频分多路复用
- 码分多址
*** 轮流协议
**** IEEE 802.5 令牌环
具有优先级处理机制；令牌是一种用于控制目的的帧
***** 工作状态
****** 发送方式
1. 截获令牌
2. 回收发出的帧
3. 产生新的令牌

****** 接收方式
**** IEEE 802.4 令牌总线 
*拓扑结构* 物理上为总线型，逻辑上是环型
*** 随机接入协议
**** ALOHA协议
该协议定义了一种用于解决在分组无线通信系统中分配广播信道的分布式方法。
操作如下：
1. 当节点获得新帧，将随时发送
2. 若无碰撞，节点能连续发送新帧
3. 若碰撞，节点可以检测到

**** 时隙ALOHA协议
*优点* 
1. 单个活跃节点能够连续以信道全速传输
2. 减少碰撞的概率
3. 简单

*缺点* 节点时钟同步困难

** 以太网 IEEE 802.3
*优点*
1. 以太网技术简单
2. 以太网最先被广泛使用，具有先发优势
3. 数据传输速率更高

*数据链路层两个子层*
1. 逻辑链路控制子层 LLC
2. 媒体接入控制子层 MAC

*NIC网卡* 
1. 进行串行并行转换
2. 对数据进行缓存
3. 对数据进行封装与解封
4. 编码与译码
5. 链路管理
*** MAC地址
以太网工作在数据链路层，乙太网适配器具有唯一的链路层地址：局域网地址，
物理地址，硬件地址或MAC地址（在网卡上）
*** 以太网的多路访问协议 CSMA/DA 
*工作机制* ：
1. 可以在任意时刻发送帧的非同步机制
2. 发送前若侦听到其他适配器在正在传输，决不会传输帧的“发前先听”机制
3. 传输中适配器一旦检测到另一个适配器正在传输，就中止自己传输的“碰撞检测”机制
*** 以太网提供的是不可靠无连接服务 

** 局域网 
用多个中继器或集线器可连接成更大局域网。物理层集线器的拓扑结构，在物理上是星型结构，
在逻辑上是总线型结构。

** 网桥 
*物理层设备扩展网络，冲突域变大*

在数据链路层扩展局域网使用网桥（可以将不同的局域网连接起来），网桥工作在数据链路层，
根据MAC帧的目的地址对收到的帧进行转发，因而它具有 *转发和过滤帧* 的功能，但 *网桥不
改变转发的帧的源地址* 
*** 优点
1. 过滤通信量
2. 扩大通信范围
3. 提高可靠性
4. *可连接不同物理层、不同MAC层、不同速率的局域网*

*网桥连接局域网，冲突域不变，但使用集线器连接会扩大冲突域*
*** 透明网桥使用支撑树算法
** 虚拟局域网
一次路由，多次交换
